<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sample Code &mdash; Intel® QuickAssist Technology  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/collapsible-lists/css/tree_view.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/qat.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../../../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Known Issues" href="known_issues.html" />
    <link rel="prev" title="Driver Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Intel® QuickAssist Technology
          </a>
              <div class="version">
                Hardware Version 2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../qat_general/legal.html">Legal Notices &amp; Disclaimers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Intro/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Intro/terminology.html">Terminology</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../In-Tree/index.html">Release Notes - In-Tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Linux/2.X/index.html">Release Notes - Linux*</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../VMware/2.X/index.html">Release Notes - VMware*</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">FreeBSD* Release Notes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="description.html">Description of Release</a></li>
<li class="toctree-l3"><a class="reference internal" href="wheretofind.html">Where to Find Current Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html">Driver Installation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Sample Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#default-configuration-files-4xxx-devices-only">Default Configuration Files(4xxx devices only)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-space-performance-sample-code">User Space Performance Sample Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kernel-space-performance-sample-code">Kernel Space Performance Sample Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functional-sample-applications-in-user-space">Functional Sample Applications in User Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functional-data-compression-data-plane-sample-application-in-kernel-space">Functional Data Compression Data Plane Sample Application in Kernel Space</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="known_issues.html">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="resolved_issues.html">Resolved Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="revision_history.html">Revision History</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../GSG/2.X/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PG/index.html">Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../VIRT/index.html">Virtualization Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../PERF/index.html">Performance Optimization Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qatlib/index.html">QATlib User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../AppNotes/index.html">Application Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../API_PG/index.html">API Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_reference.html">API Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qat_general/contact.html">Contact &amp; Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../qat_general/collateral_list.html">Documentation &amp; Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Intel® QuickAssist Technology</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../index.html">Release Notes</a> &raquo;</li>
          <li><a href="index.html">FreeBSD* Release Notes</a> &raquo;</li>
      <li>Sample Code</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sample-code">
<h1>Sample Code<a class="headerlink" href="#sample-code" title="Permalink to this headline"></a></h1>
<section id="default-configuration-files-4xxx-devices-only">
<h2>Default Configuration Files(4xxx devices only)<a class="headerlink" href="#default-configuration-files-4xxx-devices-only" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is only relevent when running on systems that contain the 4xxx devices.</p>
</div>
<p>By default, the QAT configuration files enable symmetric crypto and data compression services. If asymmetric crypto is
desired, the service must be enabled in the QAT configuration file. The QAT configuration files are included in <code class="docutils literal notranslate"><span class="pre">/etc</span></code> folder and are
named <code class="docutils literal notranslate"><span class="pre">4xxx_dev&lt;x&gt;.conf</span></code> where <code class="docutils literal notranslate"><span class="pre">x</span></code> is the device number.</p>
<p>In this file, <strong>replace</strong> the line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ServicesEnabled = sym;dc
</pre></div>
</div>
<p>With:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ServicesEnabled = asym;dc
</pre></div>
</div>
</section>
<section id="user-space-performance-sample-code">
<h2>User Space Performance Sample Code<a class="headerlink" href="#user-space-performance-sample-code" title="Permalink to this headline"></a></h2>
<ol class="arabic">
<li><p>Build the performance sample code application kernel module using the
following:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /root/QAT/
gmake samples-install
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Application can be run as follows:</p>
<blockquote>
<div><p>Sign-of-Life tests</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cpa_sample_code <span class="nv">signOfLife</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>Complete test run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cpa_sample_code
</pre></div>
</div>
<p>For complete list of command line options available refer to the <a class="reference internal" href="../../../GSG/2.X/sampleapplications.html#qat-2-0-gsg-sample-code-parameters"><span class="std std-ref">Getting Started Guide</span></a>.</p>
</div></blockquote>
</li>
</ol>
</section>
<section id="kernel-space-performance-sample-code">
<h2>Kernel Space Performance Sample Code<a class="headerlink" href="#kernel-space-performance-sample-code" title="Permalink to this headline"></a></h2>
<ol class="arabic simple">
<li><p>Build the performance sample code application kernel module using the
following:</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output of the performance test is available in system message buffer.
It could be traced in real time by using separate console with <code class="docutils literal notranslate"><span class="pre">tail</span>
<span class="pre">-F</span> <span class="pre">/var/log/messages</span></code> or by <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> tool after test execution.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /root/QAT/
gmake samples-install
</pre></div>
</div>
</div>
<ol class="arabic">
<li><p>Execute kernel space performance sample code:</p>
<blockquote>
<div><p>Sign-of-Life tests</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kenv cpa_sample_code.runTests<span class="o">=</span><span class="m">32</span>
kenv cpa_sample_code.signOfLife<span class="o">=</span><span class="m">1</span>
kldload ./build/cpa_sample_code.ko
kldunload cpa_sample_code.ko
</pre></div>
</div>
</div></blockquote>
<p>Full performance application run:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kenv cpa_sample_code.runTests<span class="o">=</span><span class="m">32</span>
kenv cpa_sample_code.signOfLife<span class="o">=</span><span class="m">0</span>
kldload ./build/cpa_sample_code.ko
kldunload cpa_sample_code.ko
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The performance tests are run during module load. The console
prompt will be back once tests finishes.</p>
</div>
</section>
<section id="functional-sample-applications-in-user-space">
<h2>Functional Sample Applications in User Space<a class="headerlink" href="#functional-sample-applications-in-user-space" title="Permalink to this headline"></a></h2>
<p>The acceleration driver package includes a number of functional sample applications.</p>
<p>These applications can be built using these steps:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /root/QAT
<span class="nb">export</span> <span class="nv">ICP_ROOT</span><span class="o">=</span><span class="sb">`</span>pwd<span class="se">\`</span>
<span class="nb">export</span> <span class="nv">ICP_OS</span><span class="o">=</span>freebsd
<span class="nb">export</span> <span class="nv">WITH_CMDRV</span><span class="o">=</span><span class="m">1</span>
<span class="nb">cd</span> ./quickassist/lookaside/access_layer/src/sample_code/
gmake func
</pre></div>
</div>
</div></blockquote>
<p>The functional applications are built and placed in the
<code class="docutils literal notranslate"><span class="pre">./functional/build</span></code> directory.</p>
<p>Here is an example of how to run the functional sample applications:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./functional/build
./eddsa_sample
</pre></div>
</div>
</div></blockquote>
</section>
<section id="functional-data-compression-data-plane-sample-application-in-kernel-space">
<h2>Functional Data Compression Data Plane Sample Application in Kernel Space<a class="headerlink" href="#functional-data-compression-data-plane-sample-application-in-kernel-space" title="Permalink to this headline"></a></h2>
<p>The application can be built using these steps:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /root/QAT
<span class="nb">export</span> <span class="nv">ICP_ROOT</span><span class="o">=</span><span class="sb">`</span>pwd<span class="se">\`</span>
<span class="nb">export</span> <span class="nv">ICP_OS</span><span class="o">=</span>freebsd
<span class="nb">export</span> <span class="nv">ICP_ENV_DIR</span><span class="o">=</span><span class="si">${</span><span class="nv">ICP_ROOT</span><span class="si">}</span>/quickassist/build_system/build_files/env_files/
<span class="nb">cd</span> ./quickassist/lookaside/access_layer/src/sample_code/functional/dc/dc_dp_sample
make
</pre></div>
</div>
</div></blockquote>
<p>The application can be executed using this step:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kldload ./dc_dp_sample.ko
</pre></div>
</div>
</div></blockquote>
<p>The sample output is available in system message buffer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please ignore module load error. It is by design to unload module
automatically immediately after test execution.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Driver Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="known_issues.html" class="btn btn-neutral float-right" title="Known Issues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Intel Corporation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>