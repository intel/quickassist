<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Software Installation &mdash; Intel® QuickAssist Technology  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/qat.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sample Applications" href="sampleapplications.html" />
    <link rel="prev" title="System Configuration" href="systemconfiguration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Intel® QuickAssist Technology
          </a>
              <div class="version">
                Hardware Version 2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../qat_general/legal.html">Legal Notices &amp; Disclaimers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Intro/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Intro/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../RN/In-Tree/index.html">Release Notes - In-Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../RN/Linux/2.X/index.html">Release Notes - Linux*</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="systemconfiguration.html">System Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Software Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-overview">Installation Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unpacking-the-software">Unpacking the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-acceleration-software">Configure Acceleration Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-options">Configuration Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-acceleration-software">Install Acceleration Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-installation-demo">Software Installation Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uninstall-acceleration-software">Uninstall Acceleration Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="#starting-stopping-the-acceleration-software">Starting/Stopping the Acceleration Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-applications-as-non-root-user">Running Applications as Non-Root User</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sampleapplications.html">Sample Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="revision_history.html">Revision History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../PG/index.html">Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../VIRT/index.html">Virtualization Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PERF/index.html">Performance Optimization Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qatlib/index.html">QATlib User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../API_PG/index.html">API Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qat_general/contact.html">Contact &amp; Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qat_general/collateral_list.html">Documentation &amp; Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Intel® QuickAssist Technology</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Getting Started Guide</a> &raquo;</li>
      <li>Software Installation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="software-installation">
<span id="qat-2-0-gsg-installation"></span><h1>Software Installation<a class="headerlink" href="#software-installation" title="Permalink to this headline"></a></h1>
<p>This section provides details on building and installing the software.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This document describes the steps required to install the out-of-tree acceleration software package. For details on installing the upstreamed acceleration software, refer to the <a class="reference external" href="https://github.com/intel/qatlib/blob/main/INSTALL">installation</a> and <a class="reference external" href="https://github.com/intel/qatlib/blob/main/README.md">readme</a> instructions at the <a class="reference external" href="https://github.com/intel/qatlib">Intel QuickAssist Technology Library (QATlib)</a> repository.</p>
</div>
<section id="installation-overview">
<h2>Installation Overview<a class="headerlink" href="#installation-overview" title="Permalink to this headline"></a></h2>
<p>The installation procedure handles a number of tasks that would otherwise have to be done manually, including the following:</p>
<ul class="simple">
<li><p>Create the kernel module files and copy them the appropriate directory (e.g. <code class="docutils literal notranslate"><span class="pre">/usr/lib/modules/KERN_VERSION/kernel/drivers/crypto</span></code> )</p></li>
<li><p>Create the shared object (.so) files by building the source code.</p></li>
<li><p>Copy the shared object (.so) files to the right directory (e.g., <code class="docutils literal notranslate"><span class="pre">/lib</span></code> or <code class="docutils literal notranslate"><span class="pre">/lib64</span></code>).</p></li>
<li><p>Build <code class="docutils literal notranslate"><span class="pre">adf_ctl</span></code> and copy it to the right directories (<code class="docutils literal notranslate"><span class="pre">$ICP_ROOT/build</span></code> and <code class="docutils literal notranslate"><span class="pre">/usr/sbin</span></code>).</p></li>
<li><p>Copy the config files to <code class="docutils literal notranslate"><span class="pre">/etc</span></code>.</p></li>
<li><p>Copy the firmware files to <code class="docutils literal notranslate"><span class="pre">/lib/firmware</span></code>.</p></li>
<li><p>Copy the modules to the appropriate kernel source directory for loading by <code class="docutils literal notranslate"><span class="pre">qat_service</span></code>.</p></li>
<li><p>Start the <code class="docutils literal notranslate"><span class="pre">qat_service</span></code>, which inserts the appropriate modules as required and runs <code class="docutils literal notranslate"><span class="pre">adf_ctl</span></code> to bring up the devices.</p></li>
<li><p>Set up the <code class="docutils literal notranslate"><span class="pre">qat_service</span></code> to run on future boots (copy to <code class="docutils literal notranslate"><span class="pre">/etc/init.d</span></code>, run <code class="docutils literal notranslate"><span class="pre">chkconfig</span></code> to add the service).</p></li>
</ul>
</section>
<section id="unpacking-the-software">
<h2>Unpacking the Software<a class="headerlink" href="#unpacking-the-software" title="Permalink to this headline"></a></h2>
<p>The software package comes in the form of a tarball.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The instructions in this document assume that you have super user privileges.</p></li>
<li><p>In this document, the working directory is assumed to be <code class="docutils literal notranslate"><span class="pre">/QAT</span></code>. This directory is the <code class="docutils literal notranslate"><span class="pre">ICP_ROOT</span></code>.</p></li>
</ul>
</div>
<ol class="arabic">
<li><p><strong>Create</strong> a working directory for the software. This directory can be user defined, but for the purposes of this document, a recommendation is provided.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ICP_ROOT=/QAT</span>
<span class="go">mkdir -p $ICP_ROOT</span>
<span class="go">cd $ICP_ROOT</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Transfer</strong> the tarball to the system in the <code class="docutils literal notranslate"><span class="pre">$ICP_ROOT</span></code> directory. <strong>Unpack</strong> the tarball using the following command:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">tar -zxof QAT20.L.*.tar.gz</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Restricting access to the files is recommended.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">chmod -R o-rwx *</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="configure-acceleration-software">
<h2>Configure Acceleration Software<a class="headerlink" href="#configure-acceleration-software" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If installing the acceleration software for use in a virtual environment refer to the <span class="xref std std-ref">Virtualization Deployment Guide</span> for additional details.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">./configure</span></code> script handles many options that may be of interest. For instance, there is a wide range of possible configurations, including build or install virtualization support (host or guest) or no virtualization support. Some build options may need to be passed as a parameter to the <code class="docutils literal notranslate"><span class="pre">./configure</span></code> script before proceeding with the installation. A complete list of configuration options is available in <a class="reference internal" href="#qat-2-0-gsg-configuration-options"><span class="std std-ref">Configuration Options</span></a>.</p></li>
</ul>
</div>
<ol class="arabic">
<li><p><strong>Prepare</strong> the package installation by checking the prerequisites and configuring the build options by running a script using the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./configure</span>
</pre></div>
</div>
<p>A welcome message is displayed, followed by the configured build options. Successfull configuration will look similar to the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
...
checking for kernel sources... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating config.h
config.status: executing depfiles commands

============================================================================
Type make followed by make install to build QAT with the following options
============================================================================
    USE_HARD_CODED_PRIMES [0]
    ICP_ARCH_USER [x86_64]
    ICP_BUILDSYSTEM_PATH [/root/QAT/quickassist/build_system]
    ICP_BUILD_OUTPUT [/root/QAT/build]
    ICP_ENV_DIR [/root/QAT/quickassist/build_system/build_files/env_files]
    ICP_TOOLS_TARGET [accelcomp]
    MAX_MR [50]
    KERNEL_SOURCE_ROOT [/lib/modules/4.18.0-193.el8.x86_64/build]
    ICP_DEBUG [false]
    QAT_UIO [false]
    ICP_PARAM_CHECK [false]
    ICP_DC_DYN_NOT_SUPPORTED [false]
    DISABLE_STATS [false]
    DRBG_POLL_AND_WAIT [false]
    ICP_LOG_SYSLOG [false]
    ICP_NONBLOCKING_PARTIALS_PERFORM [false]
    ICP_TRACE [false]
    ICP_DC_ONLY [false]
    ICP_DC_RETURN_COUNTERS_ON_ERROR [false]
    ICP_DISABLE_INLINE [false]
    INLINE [false]
============================================================================
</pre></div>
</div>
</li>
</ol>
<section id="dependencies">
<span id="qat-2-0-gsg-dependencies"></span><h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline"></a></h3>
<p>Various dependencies are required, see the ouput from <cite>.configure</cite>.</p>
<p><code class="docutils literal notranslate"><span class="pre">yasm</span></code>, for example, may need to be manually downloaded and installed via <a class="reference external" href="https://yasm.tortall.net/Download.html">https://yasm.tortall.net/Download.html</a> .</p>
<p>On Linux:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wget</span> <span class="pre">&lt;latest</span> <span class="pre">URL&gt;</span></code> (latest URL is <code class="docutils literal notranslate"><span class="pre">http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz</span></code> )</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tar</span> <span class="pre">-zxvf</span> <span class="pre">yasm-1.3.0.tar.gz</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">yasm-1.3.0/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./configure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">&amp;&amp;</span> <span class="pre">make</span> <span class="pre">install</span></code></p></li>
</ul>
<p>Then return to the QAT directory to perform the <code class="docutils literal notranslate"><span class="pre">.configure</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> commands.</p>
</section>
<section id="configuration-options">
<span id="qat-2-0-gsg-configuration-options"></span><h3>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this headline"></a></h3>
<p>A complete list of compile flags and build parameters can also be obtained by executing the following command in the shell:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./configure --help</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Compiler flags to produce safer binaries are enabled by default.</p>
</div>
<table class="longtable docutils align-default" id="id1">
<caption><span class="caption-text">Compile Flag Options</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Compile Flag</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-option-checking</span></code></p></td>
<td><p>Ignore unrecognized –enable/–with option.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-FEATURE</span></code></p></td>
<td><p>Do not include FEATURE (same as <code class="docutils literal notranslate"><span class="pre">--enable-FEATURE=no</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-FEATURE[=ARG]</span></code></p></td>
<td><p>Include <code class="docutils literal notranslate"><span class="pre">FEATURE</span> <span class="pre">[ARG=yes]</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-silent-rules</span></code></p></td>
<td><p>Less verbose build output (undo: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">V=1</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-silent-rules</span></code></p></td>
<td><p>Verbose build output (undo: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">V=0</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-maintainer-mode</span></code></p></td>
<td><p>Enable make rules and dependencies not useful (and sometimes
confusing) to the casual installer.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-dependency-tracking</span></code></p></td>
<td><p>Do not reject slow dependency extractors.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-dependency-tracking</span></code></p></td>
<td><p>Speeds up one-time build.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-debug</span></code></p></td>
<td><p>Enables debugging.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-qat-uio</span></code></p></td>
<td><p>Enables Userspace I/O.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-param-check</span></code></p></td>
<td><p>Disables parameters checking in the top-level APIs
(use for performance optimization).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-dc-dyn</span></code></p></td>
<td><p>Disables dynamic compression support.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-stats</span></code></p></td>
<td><p>Disables statistic collection (use for performance
optimization).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-drbg-poll-and-wait</span></code></p></td>
<td><p>Modifies the behavior of DRBG HT functions to use single
threaded operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-log-syslog</span></code></p></td>
<td><p>Enables debugging messages to be outputted to the system log
instead of standard output.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-nonblocking-partials-perform</span></code></p></td>
<td><p>Partial operations results are not being blocked.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-sriov</span></code></p></td>
<td><p>Enables Single-root I/O Virtualization in the QAT driver
(available options: <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">guest</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-trace</span></code></p></td>
<td><p>Enables tracing for the Cryptography API.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-asym-only</span></code></p></td>
<td><p>Enables driver to support Asymmetric Crypto services only.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-sym-only</span></code></p></td>
<td><p>Enables driver to support Symmetric Crypto services only.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-dc-only</span></code></p></td>
<td><p>Enables driver supports only compression service
(can optimize size of build objects).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-dc-sym-only</span></code></p></td>
<td><p>Enables driver to support Data Compression and
Symmetric Crypto services only.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-dc-return-counters-on-error</span></code></p></td>
<td><p>Enables updates of consumed/produced results in case
of error during compression or decompression operations.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-icp-inline</span></code></p></td>
<td><p>When defined, function inlining for functions that cannot be
inlined by the compiler is removed to enable compilation
of the driver for kernels build without
<code class="docutils literal notranslate"><span class="pre">CONFIG_ARCH_SUPPORTS_OPTIMIZED_INLINING</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-inline</span></code></p></td>
<td><p>Enables <code class="docutils literal notranslate"><span class="pre">INLINE</span></code> feature.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-icp-hb-fail-sim</span></code></p></td>
<td><p>Enable Heartbeat Failure Simulation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-qat-coexistence</span></code></p></td>
<td><p>Enables legacy and upstream driver coexistence.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-qat-lkcf</span></code></p></td>
<td><p>Enables QAT registration with Linux Kernel Crypto Framework.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-qat-kpt-debug-key</span></code></p></td>
<td><p>Enable QAT debug issue certificate.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--disable-dc-strict-mode</span></code></p></td>
<td><p>Disables Compress and Verify (CnV) functionality.
See <a class="reference internal" href="#qat-2-0-cnv-messaging"><span class="std std-ref">below</span></a> for details.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--enable-dc-error-simulation</span></code></p></td>
<td><p>Enables Data Compression Error Simulation.</p></td>
</tr>
</tbody>
</table>
<div class="admonition important" id="qat-2-0-cnv-messaging">
<p class="admonition-title">Important</p>
<p>The Compress and Verify feature checks and ensures data integrity in the compression operation of the
Intel<sup>®</sup> QAT Data Compression API. This feature introduces an independent capability to verify the
compression transformation.</p>
<p>Intel recommends that customers use the Compress and Verify capabilities for Intel<sup>®</sup> QAT compression operations.</p>
<p>As Compress and Verify provides an integrity check of the data, Intel cannot guarantee integrity of data that bypasses
the Compress and Verify capability.</p>
<p>Intel does <strong>not</strong> support disabling Compress and Verify.</p>
</div>
</section>
</section>
<section id="install-acceleration-software">
<span id="qat-2-0-gsg-install-software"></span><h2>Install Acceleration Software<a class="headerlink" href="#install-acceleration-software" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to <a class="reference internal" href="#qat-2-0-gsg-uninstall-software"><span class="std std-ref">uninstall</span></a> previous installations of the acceleration software (if previously installed).</p>
</div>
<ol class="arabic">
<li><p><strong>Open</strong> a terminal window and <strong>switch</strong> to superuser. Provide root password when prompted.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">su</span>
<span class="go">cd $ICP_ROOT</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Enter</strong> the following commands to build and install the acceleration software and sample code using the default options:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./configure</span>
<span class="go">sudo make -j install</span>
<span class="go">sudo make samples-install</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After building/installing the acceleration software, secure the build output files by either deleting them or setting permissions according to your needs.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If kernel module signing is required for the Intel QAT out-of-tree drivers, (e.g. if UEFI Secure Boot is enabled), one can incorporate this step by setting the
<code class="docutils literal notranslate"><span class="pre">mod_sign_cmd</span></code> environment variable prior to invoking the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> command.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mod_sign_cmd</span></code> environment variable should be set to the path of the required kernel headers sign-file program and include its first three command line arguments, as shown in the following example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export mod_sign_cmd=&#39;&lt;kernel header path&gt;/scripts/sign-file sha256 /root/priv.key /root/pub.der&#39;</span>
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p><strong>Add</strong> your user to the qat group by running the below command, and <strong>re-login</strong> to make the change effective.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo usermod -a -G qat `whoami`</span>
<span class="go">sudo su -l $USER</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Verify</strong> the acceleration software kernel objects are loaded and ready to use with this command:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lsmod | grep qat</span>
</pre></div>
</div>
<p>Depending on the specific hardware present, this command will return an output similar to the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>qat_4xxx               45056  0
intel_qat             331776  2 qat_4xxx,usdm_drv
uio                    20480  1 intel_qat
mdev                   20480  2 intel_qat,vfio_mdev
vfio                   36864  3 intel_qat,vfio_mdev,vfio_iommu_type1
irqbypass              16384  2 intel_qat,kvm
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all modules will be required depending on the specific hardware present.</p>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="software-installation-demo">
<h2>Software Installation Demo<a class="headerlink" href="#software-installation-demo" title="Permalink to this headline"></a></h2>
<p>Here is a demonstration of the process to setup and install the Intel<sup>®</sup> QAT software package.</p>

    <video width="500" height="300" controls >
    <source src="../../_static/video/gsg/install.mp4" type="video/mp4">
    Video
    </video>
    <div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="uninstall-acceleration-software">
<span id="qat-2-0-gsg-uninstall-software"></span><h2>Uninstall Acceleration Software<a class="headerlink" href="#uninstall-acceleration-software" title="Permalink to this headline"></a></h2>
<ol class="arabic">
<li><p><strong>Open</strong> a terminal windows and <strong>switch</strong> to superuser. Provide root password when prompted.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">su</span>
<span class="go">cd $ICP_ROOT</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Enter</strong> the following commands to uninstall the acceleration software:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">make uninstall</span>
<span class="go">make clean</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="starting-stopping-the-acceleration-software">
<span id="qat-2-0-gsg-start-stop-software"></span><h2>Starting/Stopping the Acceleration Software<a class="headerlink" href="#starting-stopping-the-acceleration-software" title="Permalink to this headline"></a></h2>
<p>When the acceleration software is installed, a script file titled <code class="docutils literal notranslate"><span class="pre">qat_service</span></code> is installed in the <code class="docutils literal notranslate"><span class="pre">/etc/init.d</span></code> directory. The script file can be used to start and stop the acceleration software.</p>
<p>To <em>start</em> the software, issue the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">service qat_service start</span>
</pre></div>
</div>
<p>To <em>stop</em> the software, issue the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">service qat_service stop</span>
</pre></div>
</div>
<p>To <em>stop</em> the software and <em>remove</em> the kernel driver, issue the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">service qat_service shutdown</span>
</pre></div>
</div>
<p>When the acceleration software is installed, it is set to load automatically when the operating system loads.</p>
</section>
<section id="configuration-files">
<h2>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this headline"></a></h2>
<p>When the acceleration software loads, it is configured based on the settings in the platform-specific configuration files.</p>
<p>The configuration files are in the <code class="docutils literal notranslate"><span class="pre">/etc</span></code> directory. Specifically:</p>
<ul class="simple">
<li><p>The name for the first configuration file for Intel<sup>®</sup> QuickAssist Technology Hardware Version 2.0 devices is <code class="docutils literal notranslate"><span class="pre">4xxx_dev0.conf</span></code></p></li>
<li><p>The name of the first configuration file for Intel<sup>®</sup> Communications Chipset 8925 to 8955 Series devices is <code class="docutils literal notranslate"><span class="pre">dh895xcc_dev0.conf</span></code>.</p></li>
<li><p>The first configuration file for the Intel<sup>®</sup> C62x Chipset or Intel<sup>®</sup> Xeon<sup>®</sup> Processor D Family SoC is <code class="docutils literal notranslate"><span class="pre">c6xx_dev0.conf</span></code>.</p></li>
<li><p>The first configuration file for Intel<sup>®</sup> Atom<sup>®</sup> C3000 Processor SoC is <code class="docutils literal notranslate"><span class="pre">c3xxx_dev0.conf</span></code>.</p></li>
<li><p>The first configuration file for other Intel<sup>®</sup> Xeon<sup>®</sup> Processor D SoC platforms is <code class="docutils literal notranslate"><span class="pre">d15xx_dev0.conf</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If more than one device of a given type is present, its name includes <code class="docutils literal notranslate"><span class="pre">dev1</span></code>, <code class="docutils literal notranslate"><span class="pre">dev2</span></code>, etc.</p>
</div>
<p>The files are processed when the system boots. If changes are made to the configuration file, the acceleration
software must be stopped and restarted for the changes to take effect.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">service qat_service restart</span>
</pre></div>
</div>
<p>The software package includes multiple types of platform-specific configuration files. Depending on your
installation options and SKU, a valid configuration file is copied to the <code class="docutils literal notranslate"><span class="pre">/etc</span></code> directory. If your system
has more than one type of hardware device or SKU, verify that the correct configuration files were copied.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The software package has been validated with the default configuration files. Changes to the configuration files could have adverse effects.</p>
</div>
<p>Refer to the <a class="reference internal" href="../../PG/configuration_files_index.html#qat-2-0-pg-configuration-files"><span class="std std-ref">Programmer’s Guide</span></a> for additional information on the configuration files.</p>
</section>
<section id="running-applications-as-non-root-user">
<span id="running-applications-as-non-root"></span><h2>Running Applications as Non-Root User<a class="headerlink" href="#running-applications-as-non-root-user" title="Permalink to this headline"></a></h2>
<p>The installation of Intel<sup>®</sup> QAT software package configures the driver to allow applications to run as non-root user. The users must be added to the <code class="docutils literal notranslate"><span class="pre">qat</span></code> group.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> command is performed at the directory where the Intel<sup>®</sup> QAT package is installed, the following <em>udev</em> file is created which is responsible for setting up non-root access.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>KERNEL==&quot;qat_adf_ctl&quot; MODE=&quot;0660&quot; GROUP=&quot;qat&quot; RUN+=&quot;/bin/chgrp qat/usr/local/bin/adf_ctl&quot;
KERNEL==&quot;qat_dev_processes&quot; MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;usdm_drv&quot; MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

ACTION==&quot;add&quot;, DEVPATH==&quot;/module/usdm_drv&quot; SUBSYSTEM==&quot;module&quot;
RUN+=&quot;/bin/mkdir / dev/hugepages/qat&quot;

ACTION==&quot;add&quot;, DEVPATH==&quot;/module/usdm_drv&quot; SUBSYSTEM==&quot;module&quot;
RUN+=&quot;/bin/chgrp qat /dev/hugepages/qat&quot;

ACTION==&quot;add&quot;, DEVPATH==&quot;/module/usdm_drv&quot; SUBSYSTEM==&quot;module&quot;
RUN+=&quot;/bin/chmod 0770 /dev/hugepages/qat&quot;

ACTION==&quot;remove&quot;, DEVPATH==&quot;/module/usdm_drv&quot; SUBSYSTEM==&quot;module&quot;
RUN+=&quot;/bin/rmdir

/dev/hugepages/qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x0435&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x0443&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x37c8&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x37c9&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x6f54&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x6f55&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x19e2&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;

KERNEL==&quot;uio*&quot;, ATTRS{vendor}==&quot;0x8086&quot;, ATTRS{device}==&quot;0x19e3&quot;
MODE=&quot;0660&quot; GROUP=&quot;qat&quot;
</pre></div>
</div>
<p>The updates to the udev rules are performed during the installation of the Intel<sup>®</sup> QAT driver.</p>
<p>The following steps need to be manually applied:</p>
<ol class="arabic">
<li><p><strong>Change</strong> the amount of max locked memory for the username included in the <code class="docutils literal notranslate"><span class="pre">qat</span></code> group (the default memory limit is 64). This can be done by specifying the limit in: <code class="docutils literal notranslate"><span class="pre">/etc/security/limits.conf</span></code>.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>@qat - memlock 4096
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="systemconfiguration.html" class="btn btn-neutral float-left" title="System Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sampleapplications.html" class="btn btn-neutral float-right" title="Sample Applications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Intel Corporation.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>